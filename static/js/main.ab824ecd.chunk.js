(this.webpackJsonpKuba=this.webpackJsonpKuba||[]).push([[0],{68:function(e,r,t){},75:function(e,r,t){"use strict";t.r(r);var n,a,c=t(1),o=t.n(c),i=t(19),u=t.n(i),s=(t(68),t(100)),l=t(111),d=t(76),b=t(102),j=t(4),O=t(8),f=t(7),p=t(55);!function(e){e[e.EMPTY=-1]="EMPTY",e[e.WHITE=0]="WHITE",e[e.BLACK=1]="BLACK",e[e.RED=2]="RED"}(n||(n={})),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.UP=2]="UP",e[e.DOWN=3]="DOWN"}(a||(a={}));var h=[[0,-1],[0,1],[-1,0],[1,0]],m=function(e,r){return e.map((function(e,t){return e+r[t]}))},v=function(){var e=[n.EMPTY,n.BLACK,n.WHITE,n.RED],r=e[0],t=e[1],a=e[2],c=e[3];return[[a,a,r,r,r,t,t],[a,a,r,c,r,t,t],[r,r,c,c,c,r,r],[r,c,c,c,c,c,r],[r,r,c,c,c,r,r],[t,t,r,c,r,a,a],[t,t,r,r,r,a,a]]},g=Object(p.a)((function(e,r){var t;return{currentBoard:v(),simBoard:v(),boardHistory:[],winner:null,errorMessage:{message:"",update:0},turns:1,captures:(t={},Object(f.a)(t,n.BLACK,0),Object(f.a)(t,n.WHITE,0),t),currentPlayer:null,makeMove:function(t,a){var c=r(),o=c.getMarble,i=c.applySim,u=c.discardSim,s=c.currentPlayer,l=c.shiftMarble,d=c.countMarble,b=c.boardHistory,j=c.validateBoard,p=c.validateMove,v=c.increaseCapture,g=o(t),x=function(e){return[function(r){return m(h[e],r)},function(r){return m(h[e].map((function(e){return-e})),r)}]}(a),y=Object(O.a)(x,2),B=y[0],C=y[1];try{p(C(t),g)}catch(S){return void e({errorMessage:{message:S.toString(),update:Math.random()}})}l(t,B);try{j(g)}catch(S){return e({errorMessage:{message:S.toString(),update:Math.random()}}),void u()}var E=function(e){var r;return(r={},Object(f.a)(r,n.WHITE,n.BLACK),Object(f.a)(r,n.BLACK,n.WHITE),r)[e]}(g),M=d(r().currentBoard),w=d(r().simBoard),T=M[E]-w[E],k=M[n.RED]-w[n.RED],P=0===T&&0===k;b.push({board:r().currentBoard,player:s,marbleChange:k}),i(),v(g,k),(0===w[E]||r().captures[g]>=7)&&e({winner:g}),e((function(e){return{turns:e.turns+1,errorMessage:{message:"",update:0}}})),(null===s||P)&&e({currentPlayer:E})},undo:function(){var t=r(),n=t.turns,a=t.boardHistory,c=t.increaseCapture;if(1!==n){var o=a.pop(),i=o.board,u=o.player,s=o.marbleChange;e({currentPlayer:u,currentBoard:i,simBoard:i,turns:n-1,winner:null}),c(u,-s)}},applySim:function(){e({currentBoard:r().simBoard})},discardSim:function(){e({simBoard:r().currentBoard})},shiftMarble:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.EMPTY,c=r().getMarble(e);c===n.EMPTY||r().shiftMarble(t(e),t,c),r().setMarble(e,a)},getMarble:function(e){var t=r().simBoard;try{var a;return null!==(a=t[e[0]][e[1]])&&void 0!==a?a:n.EMPTY}catch(c){return n.EMPTY}},setMarble:function(t,n){var a=r().simBoard;try{if(void 0!==a[t[0]][t[1]]){var c=JSON.parse(JSON.stringify(a));c[t[0]][t[1]]=n,e({simBoard:c})}}catch(o){return}},countMarble:function(e){return e.flat().reduce((function(e,r){return void 0===e[r]?Object(j.a)(Object(j.a)({},e),{},Object(f.a)({},r,1)):Object(j.a)(Object(j.a)({},e),{},Object(f.a)({},r,e[r]+1))}),{})},increaseCapture:function(t,n){var a=r().captures,c=a[t]+n;e({captures:Object(j.a)(Object(j.a)({},a),{},Object(f.a)({},t,c))})},validateBoard:function(e){var t,n,a,c=r(),o=c.boardHistory,i=c.simBoard,u=c.currentBoard,s=c.countMarble,l=s(u);if(s(i)[e]<l[e])throw Error("Cannot push off own marble");if(!(o.length<2)&&(t=i,n=(a=o,a[a.length-1]).board,JSON.stringify(t)===JSON.stringify(n)))throw Error("Cannot revert opponent's move")},validateMove:function(e,t){var a=r(),c=a.winner,o=a.currentPlayer,i=a.getMarble;if(null!==c)throw Error("Game already over");if(i(e)!==n.EMPTY)throw Error("Cannot push in this direction");if(null!==o&&t!==o)throw Error("Wrong color")},reset:function(){var r;e({currentBoard:v(),simBoard:v(),boardHistory:[],winner:null,errorMessage:{message:"",update:0},turns:1,captures:(r={},Object(f.a)(r,n.BLACK,0),Object(f.a)(r,n.WHITE,0),r),currentPlayer:null})}}})),x=t(58),y=t(47),B=t(6),C=Object(s.a)((function(){return Object(l.a)({root:{background:function(e){switch(e.color){case"red":return"linear-gradient(135deg, #FE5B55 30%, #CC1E23 90%)";case"black":return"linear-gradient(135deg, black 30%, #666 90%)";case"white":return"linear-gradient(135deg, white 30%, #ddd 90%)";default:return"none"}},border:0,borderRadius:"50%",aspectRatio:"1",touchAction:"none",cursor:function(e){return"empty"===e.color||"red"===e.color?"default":"pointer"},boxShadow:function(e){switch(e.color){case"red":return"0 3px 5px 2px rgba(255, 105, 135, .3)";case"black":return"0 3px 5px 2px rgba(25, 0, 10, .3)";case"white":return"0 3px 5px 2px rgba(0, 0, 0, .3)";default:return"none"}},userSelect:"none"}})})),E=function(e){return e.makeMove},M=Object(y.animated)(d.a),w=Object(c.memo)((function(e){var r=e.color,t=e.posRow,n=e.posCol,o=C(e),i=g(E),u=Object(c.useCallback)((function(e){i([t,n],e)}),[t,n,i]),s=Object(y.useSpring)((function(){return{x:0,y:0}})),l=Object(O.a)(s,2),d=l[0],b=d.x,f=d.y,p=l[1],h=Object(x.a)((function(e){var t=e.down,n=Object(O.a)(e.movement,2),c=n[0],o=n[1],i=e.distance,s=e.direction;if("black"===r||"white"===r){var l=i>30,d=function(e){var r=Object(O.a)(e,2),t=r[0],n=r[1];return 0===t?1===n?a.DOWN:a.UP:1===t?a.RIGHT:a.LEFT}(s);p({x:t?c:0,y:t?o:0}),!t&&l&&u(d)}}),{lockDirection:!0});return Object(B.jsx)(M,Object(j.a)(Object(j.a)({className:o.root},h()),{},{style:{x:b,y:f}}))})),T=t(59),k=t.n(T),P=Object(s.a)((function(e){return Object(l.a)({paper:{padding:e.spacing(1),color:e.palette.text.secondary}})})),S=function(e){return e.currentBoard},H=function(){var e=P(),r=g(S,k.a);return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(b.a,{container:!0,children:r.map((function(r,t){return Object(B.jsx)(b.a,{container:!0,item:!0,spacing:0,children:r.map((function(r,a){return Object(B.jsx)(b.a,{item:!0,xs:!0,children:Object(B.jsx)(d.a,{className:e.paper,variant:"outlined",square:!0,children:Object(B.jsx)(w,{color:n[r].toLowerCase(),posRow:t,posCol:a})})},a)}))},t)}))})})},I=t(105),L=t(103),W=t(104),N=t(110),R=t(106),D=t(107),K=t(112),F=t(109),A=Object(s.a)({root:{outline:"none",boxShadow:"none"},title:{fontSize:"3em"},backdrop:{zIndex:999,color:"white"}}),Y=function(){var e=A(),r=Object(c.useState)(!1),t=Object(O.a)(r,2),a=t[0],o=t[1],i=Object(c.useState)(!1),u=Object(O.a)(i,2),s=u[0],l=u[1],d=g(Object(c.useCallback)((function(e){return[e.undo,e.reset,e.turns,e.currentPlayer,e.errorMessage,e.captures,e.winner]}),[])),b=Object(O.a)(d,7),j=b[0],f=b[1],p=b[2],h=b[3],m=b[4],v=b[5],x=b[6];Object(c.useEffect)((function(){m.message?o(!0):o(!1),null!==x&&l(!0)}),[m,x]);var y=Object(c.useCallback)((function(e,r){"clickaway"!==r&&o(!1)}),[]),C=Object(c.useCallback)((function(){l(!1)}),[]);return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(L.a,{className:e.root,variant:"elevation",children:[Object(B.jsxs)(W.a,{children:[Object(B.jsx)(I.a,{className:e.title,variant:"h1",component:"h1",gutterBottom:!0,children:"Kuba"}),Object(B.jsxs)(I.a,{children:["Turn ",p,", ",null!==h?n[h]:"anyone"]}),Object(B.jsxs)(I.a,{children:["Captures: White: ",v[n.WHITE],", Black: ",v[n.BLACK]]}),Object(B.jsx)(N.a,{open:a,autoHideDuration:2e3,onClose:y,anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(B.jsx)(F.a,{onClose:y,severity:"warning",children:m.message})})]}),Object(B.jsxs)(R.a,{children:[Object(B.jsx)(D.a,{variant:"contained",onClick:j,children:"Undo"}),Object(B.jsx)(D.a,{variant:"contained",color:"secondary",onClick:f,children:"Reset"})]})]}),Object(B.jsx)(K.a,{className:e.backdrop,open:s,onClick:C,children:Object(B.jsxs)(I.a,{variant:"h1",component:"h1",children:[n[x]," wins"]})})]})},J=t(108),G=Object(s.a)({root:{}});var U=function(){var e=G();return Object(B.jsxs)(J.a,{className:e.root,maxWidth:"sm",children:[Object(B.jsx)(Y,{}),Object(B.jsx)(H,{})]})},z=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,114)).then((function(r){var t=r.getCLS,n=r.getFID,a=r.getFCP,c=r.getLCP,o=r.getTTFB;t(e),n(e),a(e),c(e),o(e)}))};u.a.render(Object(B.jsx)(o.a.StrictMode,{children:Object(B.jsx)(U,{})}),document.getElementById("root")),z()}},[[75,1,2]]]);